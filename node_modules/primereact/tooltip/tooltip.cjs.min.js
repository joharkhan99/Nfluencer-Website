"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),r=require("primereact/hooks"),n=require("primereact/portal"),o=require("primereact/utils"),u=require("primereact/componentbase");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var l=a(e),c=i(t);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e){var t=f(e,"string");return"symbol"===s(t)?t:String(t)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e){if(Array.isArray(e))return p(e)}function v(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function y(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e){if(Array.isArray(e))return e}function b(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,i,a=[],l=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=u.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){return g(e)||b(e,t)||h(e,t)||E()}var x=u.ComponentBase.extend({defaultProps:{__TYPE:"Tooltip",appendTo:null,at:null,autoHide:!0,autoZIndex:!0,baseZIndex:0,className:null,content:null,disabled:!1,event:null,hideDelay:0,hideEvent:"mouseleave",id:null,mouseTrack:!1,mouseTrackLeft:5,mouseTrackTop:5,my:null,onBeforeHide:null,onBeforeShow:null,onHide:null,onShow:null,position:"right",showDelay:0,showEvent:"mouseenter",showOnDisabled:!1,style:null,target:null,updateDelay:0,children:void 0}}),T=l.memo(l.forwardRef((function(e,t){var u=x.getProps(e),i=w(l.useState(!1),2),a=i[0],s=i[1],f=w(l.useState(u.position),2),p=f[0],g=f[1],b=w(l.useState(""),2),E=b[0],T=b[1],D=x.setMetaData({props:u,state:{visible:a,position:p,className:E}}).ptm,S=l.useRef(null),H=l.useRef(null),O=l.useRef(null),j=l.useRef(null),I=l.useRef(!0),P=l.useRef({}),k=l.useRef(null),A=w(r.useResizeListener({listener:function(e){!o.DomHandler.isTouchDevice()&&G(e)}}),2),C=A[0],L=A[1],N=w(r.useOverlayScrollListener({target:O.current,listener:function(e){G(e)},when:a}),2),R=N[0],U=N[1],Z=function(e){return B(e,"mousetrack")||u.mouseTrack},M=function(e){return"true"===B(e,"disabled")||_(e,"disabled")||u.disabled},W=function(e){return B(e,"showondisabled")||u.showOnDisabled},q=function(){return B(O.current,"autohide")||u.autoHide},B=function(e,t){return _(e,"data-pr-".concat(t))?e.getAttribute("data-pr-".concat(t)):null},_=function(e,t){return e&&e.hasAttribute(t)},F=function(e){var t=[B(e,"showevent")||u.showEvent],r=[B(e,"hideevent")||u.hideEvent];if(Z(e))t=["mousemove"],r=["mouseleave"];else{var n=B(e,"event")||u.event;"focus"===n&&(t=["focus"],r=["blur"]),"both"===n&&(t=["focus","mouseenter"],r=["blur","mouseleave"])}return{showEvents:t,hideEvents:r}},z=function(e){return{top:B(e,"mousetracktop")||u.mouseTrackTop,left:B(e,"mousetrackleft")||u.mouseTrackLeft}},Y=function(e,t){if(H.current){var r=B(e,"tooltip")||u.content;r?(H.current.innerHTML="",H.current.appendChild(document.createTextNode(r)),t()):u.children&&t()}},X=function(e){Y(O.current,(function(){var t=k.current,r=t.pageX,n=t.pageY;u.autoZIndex&&!o.ZIndexUtils.get(S.current)&&o.ZIndexUtils.set("tooltip",S.current,c.default.autoZIndex,u.baseZIndex||c.default.zIndex.tooltip),S.current.style.left="",S.current.style.top="",q()&&(S.current.style.pointerEvents="none"),!Z(O.current)&&"mouse"!=e||j.current||(j.current={width:o.DomHandler.getOuterWidth(S.current),height:o.DomHandler.getOuterHeight(S.current)}),J(O.current,{x:r,y:n},e)}))},$=function(e){O.current=e.currentTarget;var t,r=M(O.current);(t=W(O.current)&&r?O.current.firstChild:O.current,!(u.content||B(t,"tooltip")||u.children))||r||(k.current=e,a?te("updateDelay",X):re(u.onBeforeShow,{originalEvent:e,target:O.current})&&te("showDelay",(function(){s(!0),re(u.onShow,{originalEvent:e,target:O.current})})))},G=function(e){(ne(),a)&&(re(u.onBeforeHide,{originalEvent:e,target:O.current})&&te("hideDelay",(function(){(q()||!1!==I.current)&&(o.ZIndexUtils.clear(S.current),o.DomHandler.removeClass(S.current,"p-tooltip-active"),s(!1),re(u.onHide,{originalEvent:e,target:O.current}))})))},J=function(e,t,r){var n=0,i=0,a=r||p;if((Z(e)||"mouse"==a)&&t){var l={width:o.DomHandler.getOuterWidth(S.current),height:o.DomHandler.getOuterHeight(S.current)};n=t.x,i=t.y;var c=z(e),s=c.top,f=c.left;switch(a){case"left":n-=l.width+f,i-=l.height/2-s;break;case"right":case"mouse":n+=f,i-=l.height/2-s;break;case"top":n-=l.width/2-f,i-=l.height+s;break;case"bottom":n-=l.width/2-f,i+=s}n<=0||j.current.width>l.width?(S.current.style.left="0px",S.current.style.right=window.innerWidth-l.width-n+"px"):(S.current.style.right="",S.current.style.left=n+"px"),S.current.style.top=i+"px",o.DomHandler.addClass(S.current,"p-tooltip-active")}else{var d=o.DomHandler.findCollisionPosition(a),m=B(e,"my")||u.my||d.my,v=B(e,"at")||u.at||d.at;S.current.style.padding="0px",o.DomHandler.flipfitCollision(S.current,e,m,v,(function(e){var t=e.at,r=t.x,n=u.at?"center"!==r&&r!==e.my.x?r:t.y:e.at["".concat(d.axis)];S.current.style.padding="",g(n),K(n),o.DomHandler.addClass(S.current,"p-tooltip-active")}))}},K=function(e){if(S.current){var t=getComputedStyle(S.current);"left"===e?S.current.style.left=parseFloat(t.left)-2*parseFloat(t.paddingLeft)+"px":"top"===e&&(S.current.style.top=parseFloat(t.top)-2*parseFloat(t.paddingTop)+"px")}},Q=function(e){q()||(I.current=!0,G(e))},V=function(e){if(e){var t=F(e),r=t.showEvents,n=t.hideEvents,o=oe(e);r.forEach((function(e){return null==o?void 0:o.addEventListener(e,$)})),n.forEach((function(e){return null==o?void 0:o.addEventListener(e,G)}))}},ee=function(e){if(e){var t=F(e),r=t.showEvents,n=t.hideEvents,o=oe(e);r.forEach((function(e){return null==o?void 0:o.removeEventListener(e,$)})),n.forEach((function(e){return null==o?void 0:o.removeEventListener(e,G)}))}},te=function(e,t){ne();var r=B(O.current,e.toLowerCase())||u[e];r?P.current["".concat(e)]=setTimeout((function(){return t()}),r):t()},re=function(e){if(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=e.apply(void 0,r);return void 0===o&&(o=!0),o}return!0},ne=function(){Object.values(P.current).forEach((function(e){return clearTimeout(e)}))},oe=function(e){if(e){if(W(e)){if(e.hasWrapper)return e.parentElement;var t=document.createElement("span");return o.DomHandler.addClass(t,"p-tooltip-target-wrapper"),e.parentNode.insertBefore(t,e),t.appendChild(e),e.hasWrapper=!0,t}var r;return e.hasWrapper&&((r=e.parentElement).replaceWith.apply(r,m(n=e.parentElement.childNodes)||v(n)||h(n)||y()),delete e.hasWrapper),e}var n;return null},ue=function(e){ae(e),ie(e)},ie=function(e){le(e||u.target,V)},ae=function(e){le(e||u.target,ee)},le=function(e,t){if(e=o.ObjectUtils.getRefElement(e))if(o.DomHandler.isElement(e))t(e);else{var r=function(e){o.DomHandler.find(document,e).forEach((function(e){t(e)}))};e instanceof Array?e.forEach((function(e){r(e)})):r(e)}};r.useMountEffect((function(){ie(),a&&O.current&&M(O.current)&&G()})),r.useUpdateEffect((function(){return ie(),function(){ae()}}),[$,G,u.target]),r.useUpdateEffect((function(){if(a){var e=B(O.current,"position")||p,t=B(O.current,"classname");g(e),T(t),X(e),C(),R()}else g(u.position),T(""),O.current=null,j.current=null,I.current=!0;return function(){L(),U()}}),[a]),r.useUpdateEffect((function(){a&&te("updateDelay",(function(){Y(O.current,(function(){J(O.current)}))}))}),[u.content]),r.useUnmountEffect((function(){ne(),ae(),o.ZIndexUtils.clear(S.current)})),l.useImperativeHandle(t,(function(){return{props:u,updateTargetEvents:ue,loadTargetEvents:ie,unloadTargetEvents:ae,show:$,hide:G,getElement:function(){return S.current},getTarget:function(){return O.current}}}));var ce,se,fe,de,pe,me,ve,he,ye;if(a){var ge=(pe=o.classNames("p-tooltip p-component",(ce={},se="p-tooltip-".concat(p),fe=!0,(se=d(se))in ce?Object.defineProperty(ce,se,{value:fe,enumerable:!0,configurable:!0,writable:!0}):ce[se]=fe,ce),u.className,E),de=O.current,me=!(u.content||B(de,"tooltip")),ve=o.mergeProps({id:u.id,ref:S,className:pe,style:u.style,role:"tooltip","aria-hidden":a,onMouseEnter:function(e){q()||(I.current=!1)},onMouseLeave:function(e){return Q}},x.getOtherProps(u),D("root")),he=o.mergeProps({className:"p-tooltip-arrow"},D("arrow")),ye=o.mergeProps({ref:H,className:"p-tooltip-text"},D("text")),l.createElement("div",ve,l.createElement("div",he),l.createElement("div",ye,me&&u.children)));return l.createElement(n.Portal,{element:ge,appendTo:u.appendTo,visible:!0})}return null})));T.displayName="Tooltip",exports.Tooltip=T;
