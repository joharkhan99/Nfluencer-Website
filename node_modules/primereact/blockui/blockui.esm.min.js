import*as e from"react";import n from"primereact/api";import{useMountEffect as t,useUpdateEffect as r,useUnmountEffect as o}from"primereact/hooks";import{Portal as l}from"primereact/portal";import{DomHandler as a,ZIndexUtils as c,classNames as u,mergeProps as i,ObjectUtils as d}from"primereact/utils";import{ComponentBase as m}from"primereact/componentbase";function f(e){if(Array.isArray(e))return e}function s(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,l,a,c=[],u=!0,i=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=l.call(t)).done)&&(c.push(r.value),c.length!==n);u=!0);}catch(e){i=!0,o=e}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(i)throw o}}return c}}function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function y(e,n){if(e){if("string"==typeof e)return p(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,n):void 0}}function b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var v=m.extend({defaultProps:{__TYPE:"BlockUI",autoZIndex:!0,baseZIndex:0,blocked:!1,className:null,containerClassName:null,containerStyle:null,fullScreen:!1,id:null,onBlocked:null,onUnblocked:null,style:null,template:null,children:void 0}}),k=e.forwardRef((function(m,p){var k,h,S=v.getProps(m),I=e.useState(S.blocked),g=(h=2,f(k=I)||s(k,h)||y(k,h)||b()),x=g[0],E=g[1],w=e.useRef(null),C=e.useRef(null),N=v.setMetaData({props:S}).ptm,A=function(){E(!0)},U=function(){var e=function(){E(!1),S.fullScreen&&a.removeClass(document.body,"p-overflow-hidden"),S.onUnblocked&&S.onUnblocked()};C.current?(a.addClass(C.current,"p-component-overlay-leave"),C.current.addEventListener("animationend",(function(){c.clear(C.current),e()}))):e()},j=function(){if(S.fullScreen&&(a.addClass(document.body,"p-overflow-hidden"),document.activeElement.blur()),S.autoZIndex){var e=S.fullScreen?"modal":"overlay";c.set(e,C.current,n.autoZIndex,S.baseZIndex||n.zIndex[e])}S.onBlocked&&S.onBlocked()};t((function(){x&&A()})),r((function(){S.blocked?A():U()}),[S.blocked]),o((function(){S.fullScreen&&a.removeClass(document.body,"p-overflow-hidden"),c.clear(C.current)})),e.useImperativeHandle(p,(function(){return{props:S,block:A,unblock:U,getElement:function(){return w.current}}}));var B=function(){if(x){var n=S.fullScreen?document.body:"self",t=u("p-blockui p-component-overlay p-component-overlay-enter",{"p-blockui-document":S.fullScreen},S.className),r=S.template?d.getJSXElement(S.template,S):null;return e.createElement(l,{element:e.createElement("div",{ref:C,className:t,style:S.style},r),appendTo:n,onMounted:j})}return null}(),O=u("p-blockui-container",S.containerClassName),Z=i({id:S.id,ref:w,style:S.containerStyle,className:O},v.getOtherProps(S),N("root"));return e.createElement("div",Z,S.children,B)}));k.displayName="BlockUI";export{k as BlockUI};
